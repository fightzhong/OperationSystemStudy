## 操作系统的目标
```
方便性: 在没有操作系统的计算机下, 用户需要直接对硬件接口进行操作, 而操作的前提是用户能够记住这些接
        口命令, 所以会导致不方便用户的使用, 引入操作系统, 在OS提供的服务下, 如用户图形界面, 命令
        行窗口命令等, 使得用户能够更加方便的使用计算机
有效性: 在早期的计算机下, 有通过人机直接交互, 单道批系统, 多道批系统的方式来使用计算机资源, 但是都
        会存在一些人机矛盾, CPU与IO设备速度矛盾的问题, 因为CPU的处理速度很快, 但是IO速度是相对较
        慢的, 所以提高操作系统资源利用率就是使得有效使用操作系统的目标
扩展性: 计算机硬件发展迅速的情况下, 为了能够使得操作系统兼容这些硬件, 需要使得操作系统存在可扩展性,
        现代操作系统广泛采用微内核结构(在内核中仅仅提供少量的必备的操作, 之后更多的操作由操作系统
        制造者来进行一定的扩展)就是操作系统实现扩展性目标的路径之一                
开放性: 由于硬件和软件厂商的不同, 为了在操作系统上运行这些软件, 使用硬件能够更加的兼容, 需要制定统
        一的标准, 这就是开放性的体现        
```

## 操作系统的作用
```
1. OS作为用户与计算机硬件系统之间的接口, 用户通过OS来方便、快捷、可靠地使用计算机
2. OS作为计算机系统资源的管理者, 主要体现在处理机CPU的管理(分配和控制处理机), 存储器管理(负责内存
  的分配和回收), I/O设备管理(负责I/O设备的分配, 回收, 操纵), 文件管理(对文件的存取, 共享和保护)
3. OS实现了对计算机资源的抽象, 比如用户需要使用I/O设备进行输入与输出操作, 操作系统可以通过增加一层
  I/O设备软件使得用户可以通过该软件来操作I/O, 这就是对计算机资源的抽象, 使得用户间接的操作计算机资
  源而无需关系I/O设备的细节    
```

## 操作系统的发展过程
> 作业可以理解为一个程序
### 未配置操作系统的计算机
  - 人工操作方式
    ```
    由程序员将事先已经再纸带/卡片上写好的程序装入纸带输入机, 再启动它将纸带上的程序输入计算机, 然
    后启动运行, 结束后取走计算机结果, 之后才允许下一个用户使用

    缺点:
        <1> 用户独占全机, 一台计算机上的资源由一个用户独占
        <2> CPU等待人工操作, 当用户在进行纸带的装卸时CPU处于等待状态, 资源没有得到有效的利用
    ```
  - 脱机输入/输出方式
    ```
    由纸带输入机将数据程序输入计算机过于的缓慢, 脱机输入输出方式通过将纸带输入机的数据出入到一个磁
    带上, 当CPU需要这些数据和程序时直接从磁带上获取, 即在人工操作的基础上增加了一个磁带, CPU从磁带
    获取数据的效率是更高的, 从而减少了CPU的空闲时间, 提高了I/O速度
    ``` 

### 单道批处理系统
```
在脱机输入/输出方式下, 由于一个程序被写入一个磁带中, 那么为了能够将多个程序连续处理, 单道批处理系统
采用一个监督程序, 从磁带中取出一个程序运行, 运行结束后再选择下一个程序, 这样程序就是成批进行的了,
但是由于内存中始终只保持一个程序, 所以叫单道批处理系统

缺点: 内存中只存在一道程序, 为了能够运行大型的程序, 我们的内存肯定是要选择适当的大一点, 但是大部分
      情况下只会运行小型的程序, 所以会造成内存资源的空闲
```

### 多道批处理系统
```
将用户要运行的作业/程序并排成一个队列, 称为"后备队列", 然后由作业调度按一定的算法在后备队列中选择
若干个作业调入内存, 使得它们共享计算机资源, 由于内存中装有多个作业, 则可以在运行的作业在进行I/O操
作的时候将CPU分配给其它的作业运行, 从而使得多道程序交替运行, CPU处于忙碌状态

优缺点:
  <1> 提高了资源利用率和系统吞吐量
  <2> 无用户交互能力, 一旦把程序提交给系统则在作业完成前都没办法进行交互, 修改和调试程序不方便
```

### 分时系统
```
通过时间片的方式来使得程序交替进行, 通过提供终端来使得用户能够发送指令给系统, 系统对指令进行及时处
理并反馈信息给用户
```

### 实时系统
```
在实时系统中运行的任务分为硬实时任务和软实时任务:
硬实时任务指的是系统必须满足任务对截至时间的要求, 否则可能会出现难以预测的后果, 一般用于工业和武器
控制等, 软实时任务虽然对时间也有限制, 但是偶尔错过了任务的截至时间也不会影响太大, 如信息查询系统(
飞机或者火车订票系统)
```

## 操作系统的基本特性
- 并发
```
并行指的是同一时间两个或者多个任务同时进行, 并发指的是在同一时间段内多个程序分时交替运行, 如在3秒中
内3个任务并发运行, 一个任务运行1秒钟, 并行用于多个CPU的情况下多个CPU分别执行不同的任务
```
- 共享
```
这里的共享指的是资源的共享, 举个例子, 对于一个文件我们可以同时做两个操作, 一个是查看该文件内存, 另
一个是将该文件发送到其它地方, 对于这两个操作来说就是对该文件的共享操作

实现共享主要有两种方式:
1. 互斥共享方式
  系统钟的某些资源如打印机, 虽然可以提供给多个进程使用, 但规定在同一时间内只能由一个程序访问该资源,
  只有当该程序访问完成后才能由下一个程序访问, 对于这种资源也叫做临界资源
2. 同时访问方式
  对于一个资源, 运行在一段时间内由多个进程"同时"对它们进行访问, 但是这个所谓的同时, 在单CPU的环境
  下是宏观意义上的, 就是看起来是同时访问, 在微观意义上这个访问是交替进行的
```

> 并发和共享式多用户/多任务OS的最基本的特征

- 虚拟
```
时分复用技术: 
  1. 虚拟处理机技术, 通过时间片的方式使得多个程序交替进行, 比如在单CPU的情况下, 我们同时打开多个程
     序, 看似可以同时运行多个程序, 其实这些程序在使用CPU资源的时候是交替使用的, 但是在我们看来是每
     一个资源都使用了一个CPU意义
  2. 虚拟设备技术, 虚拟I/O设备, 当我们对多个文件进行打印操作的时候, 看似多个文件在同时打印, 其实这
      些打印操作是依次进行的
空分复用技术: 
    虚拟内存的使用, 比如计算机的内存是4G, 但是却运行着大于4G的程序, 就会看起来内存很大, 但实际上是
    只将当前需要的数据读入了内存而已
```

- 异步
```
在并发, 存在I/O请求的情况下, 程序不是一气呵成的, 而是走走停停, 比如当需要I/O操作时, CPU的执行权就
会交给其它程序, 而I/O操作完成的时候才会重新准备获得CPU的执行权, 所以对于进程来说, 是以人们不可预知
的速度向前推进的, 此即进程的异步性, 尽管如此, 只要在OS中配置了完善的进程同步机制, 且运行环境相同, 
则作业即便经过多次运行, 也会获得完全相同的结果, 因此异步运行方式是允许的, 而且是操作系统的一个重要
特征
```

## 操作系统的主要功能
- 处理机(CPU)管理功能
```
处理机的分配和运行都是以进程为基本单位的, 因为对处理机的管理可归结为对进程的管理, 处理机管理的主要
功能有: 创建和撤销进程, 对诸进程的运行进行协调, 实现进程之间的信息交换, 以及按照一定的算法把处理机
分配给进程

<1> 进程控制
  为作业创建、撤销(终止)已结束的进程, 以及控制进程在运行过程中的状态转换
<2> 进程同步
  为使得多个进程能有条不紊地进行, 系统中必须设置相应的进程同步机制, 常用的协调方式有两种:
  - 进程互斥方式, 指在对临界资源进行访问时, 应采用互斥方式
  - 进程同步方式, 多个进程共同去完成同一个任务时, 由同步机构对它们的执行次序加以协调, 如PV操作  
<3> 进程通信
  当相互合作的进程处于同一计算机系统时, 通常在它们之间采用直接通信方式, 即由源进程利用发送命令直接
  将消息挂到目标进程的消息队列上, 以后由目标进程利用接受命令从其消息队列中取出消息
<4> 调度  
  作业调度: 从后备队列中按照一定的算法选择出若干个作业, 为它们分配运行所需的资源, 在将这些作业调入
            内存后, 分别为它们建立进程, 使它们都称为可能获得处理机的就需进程, 并将它们插入就绪队列
  进程调度: 从进程的就绪队列中按照一定的算法选出一个进程, 将处理机分配给它          
```
- 存储器管理功能
```
存储器管理应具有内存分配和回收、内存保护、地址映射和内存扩充等功能
内存分配和回收: 为每道程序分配内存空间, 提高存储器的利用率(减少内部和外部碎片)
内存保护: 确保每个程序仅在自己的内存空间内运行, 不允许用户程序访问操作系统的程序和数据, 即在发生越
          界时中断请求(如数组的越界)
地址映射: 将程序中的从0开始内存地址映射成真正的物理内存地址
内存扩充: 逻辑上的内存扩充, 利用虚拟内存技术, 以及请求调入功能, 当执行需要该部分数据时才从外存中调
          入, 以及置换功能, 内存不足的情况下将暂时不用的内存中的数据调入外存(如Linux中的swap分区)
```
- 设备管理功能
```
<1> 缓冲管理: 在I/O设备和CPU之间引入缓冲区, 可有效的解决I/O速度和CPU速度不匹配的矛盾
<2> 设备分配: 根据用户进程的I/O请求、系统现有资源情况以及按照某种设备分配策略, 为之分配其所需的设备
<3> 设备处理: 通过设备驱动程序来实现CPU和设备控制器之间的通信, 即由CPU向设备控制器发出I/O命令, 要
              求它完成指定的I/O操作, 以及处理I/O设备发送给CPU的中断请求, 并对请求迅速的相应和处理
```
- 文件管理
```
<1> 文件存储空间的管理: 为每个文件分配必要的外存空间, 以及对外存空间的回收
<2> 目录管理: 为每个文件建立一个目录项, 包括文件名、文件属性、文件在磁盘上的物理位置等, 对众多的目
              录项加以有效的组织, 以实现方便的按名存取
<3> 文件的读/写管理和保护: 保护可以理解为Linux上的权限管理rwx等              
```







